/*
 angular-slider v0.2.3 
 (c) 2013-2014 Venturocket, Inc. http://github.com/Venturocket 
 License: MIT 
*/
window.AngularSlider=function(a,b,c){function d(a){n.cssText=a}function e(a,b){return typeof a===b}function f(){j.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)o.setAttribute("type",e=a[g]),d="text"!==o.type,d&&(o.value=p,o.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&o.style.WebkitAppearance!==c?(k.appendChild(o),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(o,null).WebkitAppearance&&0!==o.offsetHeight,k.removeChild(o)):/^(search|tel)$/.test(e)||(d=/^(url|email)$/.test(e)?o.checkValidity&&o.checkValidity()===!1:o.value!=p)),r[a[g]]=!!d;return r}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var g,h,i="2.7.1",j={},k=b.documentElement,l="modernizr",m=b.createElement(l),n=m.style,o=b.createElement("input"),p=":)",q=({}.toString,{}),r={},s=[],t=s.slice,u={}.hasOwnProperty;h=e(u,"undefined")||e(u.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return u.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=t.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(t.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(t.call(arguments)))};return d});for(var v in q)h(q,v)&&(g=v.toLowerCase(),j[g]=q[v](),s.push((j[g]?"":"no-")+g));return j.input||f(),j.addTest=function(a,b){if("object"==typeof a)for(var d in a)h(a,d)&&j.addTest(d,a[d]);else{if(a=a.toLowerCase(),j[a]!==c)return j;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(k.className+=" "+(b?"":"no-")+a),j[a]=b}return j},d(""),m=o=null,j._version=i,j}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),AngularSlider.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},angular.module("vr.directives.slider",["ngTouch"]).directive("slider",["$timeout","$document","$interpolate","$swipe",function(a,b,c,d){function e(a){return angular.element(a)}function f(a){return""+a+"px"}function g(a,b){return a.css({opacity:b})}function h(a){return g(a,0)}function i(a){return g(a,1)}function j(a,b){return a.css({left:b})}function k(a){var b=parseFloat(a.css("width"));return isNaN(b)?a[0].offsetWidth:b}function l(a){return k(a)/2}function m(a){try{return a.offset().left}catch(b){}return a[0].getBoundingClientRect().left}function n(a,b){return m(a)>m(b)?m(a)-m(b)-k(b):m(b)-m(a)-k(a)}function o(a,b){return a.attr("ng-bind-template",b)}function p(a,b,c,d,e){(angular.isUndefined(b)||!b)&&(b=0),(angular.isUndefined(c)||!c||0==c)&&(c=1/Math.pow(10,b)),(angular.isUndefined(d)||!d)&&(d=0),(angular.isUndefined(a)||!a)&&(a=0);var f=(a-d)%c,g=f>c/2?a+c-f:a-f;return(angular.isUndefined(e)||!e)&&(e=g),g=Math.min(Math.max(g,d),e),parseFloat(g.toFixed(b))}function q(a,b){return a>0&&!isNaN(b)?Math.ceil(b/a)*a:b}function r(a){return t+" "+a+" "+u}var s=3,t=c.startSymbol(),u=c.endSymbol();return{restrict:"EA",scope:{floor:"@",ceiling:"@",step:"@",precision:"@",buffer:"@",stickiness:"@",showSteps:"@",ngModel:"=",ngModelLow:"=",ngModelHigh:"=",translate:"&",translateRange:"&",translateCombined:"&",scale:"&",inverseScale:"&"},template:"<span class='bar full'></span><span class='bar steps'><span class='bubble step' ng-repeat='step in stepBubbles()'></span></span><span class='bar selection'></span><span class='bar unselected low'></span><span class='bar unselected high'></span><span class='pointer low'></span><span class='pointer high'></span><span class='bubble low'></span><span class='bubble high'></span><span class='bubble middle'></span><span class='bubble selection'></span><span class='bubble limit floor'></span><span class='bubble limit ceiling'></span><input type='range' class='input low' /><input type='range' class='input high' /><input type='range' class='input selection' />",compile:function(c,g){function t(a){a||(a=c);var b=[];return angular.forEach(a.children(),function(a){b.push(e(a))}),b}function u(a,b,c){return{fullBar:a[0],stepBubs:a[1],selBar:b?a[2]:null,unSelBarLow:b?a[3]:null,unSelBarHigh:b?a[4]:null,minPtr:b?a[5]:a[2],maxPtr:b?a[6]:null,lowBub:b?a[7]:a[3],highBub:b?a[8]:null,cmbBub:b?a[9]:null,selBub:b?a[10]:null,flrBub:b?a[11]:a[4],ceilBub:b?a[12]:a[5],minInput:c?b?a[13]:a[6]:null,maxInput:c?b?a[14]:null:null,selInput:c?b?a[15]:null:null}}var v=g.showSteps,w=null==g.ngModel&&null!=g.ngModelLow&&null!=g.ngModelHigh,x={},y=w?"ngModelLow":"ngModel",z="ngModelHigh",A="selectBar",B=["floor","ceiling","stickiness",y];if(x=function(){for(var a=t(),b=[],c=0,d=a.length;d>c;c++){var f=a[c];f=e(f),f.css({"white-space":"nowrap",position:"absolute",display:"block","z-index":1}),b.push(f)}return b}(),x=u(x,!0,!0),g.translate&&g.$set("translate",""+g.translate+"(value)"),g.translateRange&&g.$set("translateRange",""+g.translateRange+"(low,high)"),g.translateCombined&&g.$set("translateCombined",""+g.translateCombined+"(low,high)"),g.scale&&g.$set("scale",""+g.scale+"(value)"),g.inverseScale&&g.$set("inverseScale",""+g.inverseScale+"(value)"),x.fullBar.css({left:0,right:0}),AngularSlider.inputtypes.range){var C={position:"absolute",margin:0,padding:0,opacity:0,height:"100%"};x.minInput.attr("step",r("inputSteps()")),x.minInput.attr("min",r("floor")),x.minInput.css(C),x.minInput.css("left",0),w?(x.minInput.attr("max",r("ngModelHigh - (buffer / 2)")),x.maxInput.attr("step",r("inputSteps()")),x.maxInput.attr("min",r("ngModelLow + (buffer / 2)")),x.maxInput.attr("max",r("ceiling")),x.maxInput.css(C),x.selInput.attr("step",r("inputSteps()")),x.selInput.attr("min",r("ngModelLow")),x.selInput.attr("max",r("ngModelHigh")),x.selInput.css(C)):(x.minInput.attr("max",r("ceiling")),x.minInput.css({width:"100%"}),x.maxInput.remove(),x.selInput.remove())}else x.minInput.remove(),x.maxInput.remove(),x.selInput.remove();if(o(x.stepBubs.children().eq(0),r("translation(step)")),o(x.ceilBub,r("translation(ceiling)")),o(x.flrBub,r("translation(floor)")),o(x.selBub,r("rangeTranslation("+y+","+z+")")),o(x.lowBub,r("translation("+y+")")),o(x.highBub,r("translation("+z+")")),o(x.cmbBub,r("combinedTranslation("+y+","+z+")")),w)B.push(z),B.unshift("buffer");else for(var D=[x.selBar,x.unSelBarLow,x.unSelBarHigh,x.maxPtr,x.selBub,x.highBub,x.cmbBub],E=0,F=D.length;F>E;E++)c=D[E],c.remove();return B.unshift("precision","step"),v||x.stepBubs.children().remove(),{post:function(c,g,o){function r(){if(angular.forEach(B,function(a){c[a]=parseFloat(c[a]),a==y||a==z?c[a]=p(c[a],c.precision,c.step,c.floor,c.ceiling):"buffer"==a?c.buffer=!c.buffer||isNaN(c.buffer)||c.buffer<0?0:q(c.step,c.buffer):"precision"==a?c.precision=!c.precision||isNaN(c.precision)?0:parseInt(c.precision):"step"==a?c.step=!c.step||isNaN(c.step)?1/Math.pow(10,c.precision):parseFloat(c.step.toFixed(c.precision)):"stickiness"==a&&(isNaN(c.stickiness)?c.stickiness=s:c.stickiness<1&&(c.stickiness=1)),c.decodedValues[a]=c.decodeRef(a)}),w){if(c[z]<c[y]){var a=c[z];c[z]=c[y],c[y]=a}var b=p(c[z]-c[y],c.precision,c.step);if(c.buffer>0&&b<c.buffer){var d=c.encode((c.decodedValues[y]+c.decodedValues[z])/2);c[y]=p(d-c.buffer/2,c.precision,c.step,c.floor,c.ceiling),c[z]=c[y]+c.buffer,c[z]>c.ceiling&&(c[z]=c.ceiling,c[y]=c.ceiling-c.buffer)}}C=k(x.fullBar),D=l(x.minPtr),E=m(x.fullBar),F=E+C-k(x.minPtr),G=F-E,H=c.floor,I=c.decodedValues.floor,J=c.ceiling,K=c.decodedValues.ceiling,L=J-H,M=K-I}function v(){function a(a){return 100*((a-E)/G)}function o(b){return a(b)/100*M+I}function q(a){return c.encode(o(a))}function s(a){return 100*((a-I)/M)}function t(a){return s(c.decode(a))}function u(a){return f(a*G/100)}function v(a){return Math.min(Math.max(a,E),F)}function B(b){return j(b,u(a(v(m(b)))))}function K(a,b,d){var e=a>0?1:-1;return b=b?b:100,d?(Math.sin(Math.min(Math.abs(a/b),1)*Math.PI-Math.PI/2)+1)*e*b/6:e*Math.pow(Math.min(Math.abs(2*(a/b)),1),c.stickiness)*b/2}function L(){var b=s(c.decodedValues[y]),d=t(c[y]+c.step)-b,e=b-t(c[y]-c.step),f=t(c[y]+c.buffer)-b,g=a(D+E),h=b+K(N,N>0?d:e);if(j(x.minPtr,u(h)),j(x.lowBub,u(a(m(x.minPtr)-l(x.lowBub)+D))),w){var i=s(c.decodedValues[z]),k=t(c[z]+c.step)-i,n=i-t(c[z]-c.step),o=i-t(c[z]-c.buffer),p=i+K(O,O>0?k:n);if(h>i-o&&(h=b+K(N,f,!0),j(x.minPtr,u(h)),j(x.lowBub,u(a(m(x.minPtr)-l(x.lowBub)+D)))),b+f>p&&(p=i+K(O,o,!0)),j(x.maxPtr,u(p)),j(x.highBub,u(a(m(x.maxPtr)-l(x.highBub)+D))),j(x.selBar,u(h+g)),x.selBar.css({width:u(p-h)}),j(x.selBub,u((h+p)/2-a(l(x.selBub)+E)+g)),j(x.cmbBub,u((h+p)/2-a(l(x.cmbBub)+E)+g)),x.unSelBarLow.css({left:0,width:u(h+g)}),j(x.unSelBarHigh,u(p+g)),x.unSelBarHigh.css({right:0}),AngularSlider.inputtypes.range){var q=2*g,r=h+f/2,v=p-o/2;x.minInput.css({width:u(v)}),x.maxInput.css({left:u(r+q),width:u(100-r)}),x.selInput.css({left:u(h+q),width:u(p-h-q)})}}}function Q(){var a=x.lowBub;B(x.lowBub),w&&(B(x.highBub),B(x.selBub),n(x.lowBub,x.highBub)<10?(h(x.lowBub),h(x.highBub),i(x.cmbBub),B(x.cmbBub),a=x.cmbBub):(i(x.lowBub),i(x.highBub),h(x.cmbBub),a=x.highBub)),n(x.flrBub,x.lowBub)<5?h(x.flrBub):w?n(x.flrBub,a)<5?h(x.flrBub):i(x.flrBub):i(x.flrBub),n(x.lowBub,x.ceilBub)<5?h(x.ceilBub):w?n(a,x.ceilBub)<5?h(x.ceilBub):i(x.ceilBub):i(x.ceilBub)}function R(){N=0,O=0,Y&&(L(),Q(),Y.removeClass("active")),Y=null,Z=null,V=!1}function S(b){Y&&c.$apply(function(){var d=b.clientX||b.x;if(V){var e=q(d)-W,f=q(d)+X;H>e?(f+=H-e,e=H):f>J&&(e-=f-J,f=J);var h=t(e),i=t(f);N=h,O=i,c[y]=e=p(e,c.precision,c.step,c.floor,c.ceiling),c[z]=f=p(f,c.precision,c.step,c.floor,c.ceiling),N-=t(e),O-=t(f)}else{var j=v(d+E-m(g)-l(Y)),k=a(j),n=c.encode(I+M*k/100);if(N=k,w)if(c.buffer>0)Z===y?n>c[z]-c.buffer&&(n=c[z]-c.buffer):n<c[y]+c.buffer&&(n=c[y]+c.buffer);else if(Z===y){if(n>c[z]){c[y]=c[z],c.decodedValues[y]=c.decodeRef(y),Z=z;var o=x.minPtr;x.minPtr=x.maxPtr,x.maxPtr=o,x.maxPtr.removeClass("active").removeClass("high").addClass("low"),x.minPtr.addClass("active").removeClass("low").addClass("high")}}else if(n<c[y]){c[z]=c[y],c.decodedValues[z]=c.decodeRef(z),Z=y;var o=x.minPtr;x.minPtr=x.maxPtr,x.maxPtr=o,x.minPtr.removeClass("active").removeClass("low").addClass("high"),x.maxPtr.addClass("active").removeClass("high").addClass("low")}c[Z]=n=p(n,c.precision,c.step,c.floor,c.ceiling),c.decodedValues[Z]=c.decodeRef(Z),Z===y?(N-=t(n),O=0):(O=N-t(n),N=0)}L(),Q()})}function T(b,d,e){Y=d,Z=e,Y.addClass("active");var f=b.clientX||b.x,h=I+M*a(v(f+E-m(g)))/100;if(Z==A){V=!0;var i=q(f);W=i-c[y],X=c[z]-i}c[Z]=p(c.encode(h),c.precision,c.step,c.floor,c.ceiling),L(),Q(),c.$apply(),r()}function U(){function a(a,b,c){function f(a){T(a,b,c)}function g(a){S(a),R()}a=e(a),window.navigator.pointerEnabled?a.on("pointerdown",f).on("pointermove",S).on("pointerup",g).on("pointercancel",R):window.navigator.msPointerEnabled?a.on("MSPointerDown",f).on("MSPointerMove",S).on("MSPointerUp",g).on("MSPointerCancel",R):d.bind(a,{start:f,move:S,end:g,cancel:R})}function c(a,b,c){a=e(a),c=angular.isUndefined(c)?a:e(c),d.bind(a,{start:function(a){T(a,c,b)}})}function f(a){a=e(a),d.bind(a,{move:S,end:function(a){S(a),R()},cancel:R})}AngularSlider.inputtypes.range?(a(x.minInput,x.minPtr,y),w&&(a(x.maxInput,x.maxPtr,z),a(x.selInput,x.selBar,A))):(f(b),c(x.minPtr,y),c(x.lowBub,y),c(x.flrBub,y,x.minPtr),w?(c(x.maxPtr,z),c(x.highBub,z),c(x.ceilBub,z,x.maxPtr),c(x.selBar,A),c(x.selBub,A,x.selBar),c(x.unSelBarLow,y,x.minPtr),c(x.unSelBarHigh,z,x.maxPtr)):(c(x.ceilBub,y,x.minPtr),c(x.fullBar,y,x.minPtr)))}var V,W,X,Y,Z;r(),j(x.flrBub,0),j(x.ceilBub,f(C-k(x.ceilBub))),L(),Q(),P||(U(),P=!0)}var x=u(t(g),w,AngularSlider.inputtypes.range);c.decodedValues={floor:0,ceiling:0,step:0,precision:0,buffer:0,stickiness:0,ngModel:0,ngModelLow:0,ngModelHigh:0},c.translation=function(a){return a=parseFloat(a).toFixed(c.precision),angular.isUndefined(o.translate)?""+a:c.translate({value:a})},c.rangeTranslation=function(a,b){return angular.isUndefined(o.translateRange)?"Range: "+c.translation(b-a):c.translateRange({low:a,high:b})},c.combinedTranslation=function(a,b){return angular.isUndefined(o.translateCombined)?c.translation(a)+" - "+c.translation(b):c.translateCombined({low:a,high:b})},c.encode=function(a){return angular.isUndefined(o.scale)||""==o.scale?a:c.scale({value:a})},c.decode=function(a){return angular.isUndefined(o.inverseScale)||""==o.inverseScale?a:c.inverseScale({value:a})},(1!=Math.round(c.encode(c.decode(1)))||100!=Math.round(c.encode(c.decode(100))))&&console.warn("The scale and inverseScale functions are not perfect inverses: 1 = "+c.encode(c.decode(1))+"  100 = "+c.encode(c.decode(100))),c.decodeRef=function(a){return c.decode(c[a])},c.inputSteps=function(){return Math.pow(10,-1*c.precision)};for(var C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=0,O=0,P=!1,Q=0;Q<B.length;Q++)c.$watch(B[Q],function(){v()});e(window).bind("resize",function(){v()}),c.$on("refreshSlider",function(){a(function(){v()})}),a(function(){v()})}}}}}]);